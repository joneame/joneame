function jonea(a,f,e,d){var b=base_url+"backend/jonea.php";var c="id="+f+"&user="+a+"&md5="+d;b=b+"?"+c;disable_vote_link(f,"espera...","#adcee9");$.getJSON(b,function(g){parseLinkAnswer(e,g)})}function joneo_aleatorio(a,f,e,d){var b=base_url+"backend/aleatorio.php";var c="id="+f+"&user="+a+"&md5="+d;b=b+"?"+c;disable_vote_link(f,"lloneandoo!","#adcee9");$.getJSON(b,function(g){parseLinkAnswer(e,g);parsealeatorioLinkAnswer(e,g)})}function karga_mezuak(a,d){var b=base_url+"backend/mezuak.php";var c="id="+a+"&md5="+d;b=b+"?"+c;$.getJSON(b,function(e){ErantzunaProzesatu(a,e)});setTimeout('karga_mezuak("'+a+'", "'+d+'")',40000)}function idatzi_mezuak(a){$("#mezuak").html("<span>"+a+"</span>")}function ErantzunaProzesatu(b,a){if(a.error||b!=a.id){idatzi_mezuak(".. error al actualizar los datos ..");alert("Error: "+a.error);return false}idatzi_mezuak(a.mezuberri);return false}function irakurri_mezua(d,b,f,a,g){var c=base_url+"backend/mezuak_ikusi.php";var e="id="+b+"&md5="+f+"&mid="+d+"&mota="+a+"&eg="+g;c=c+"?"+e;$.ajax({url:c,dataType:"html",success:function(h){idatzi_mezuguztia(h,d)}})}function ezabatu_mezua(d,b,f,a){var c=base_url+"backend/ezabatu_mezua.php";var e="id="+b+"&md5="+f+"&mid="+d+"&mota="+a;c=c+"?"+e;document.getElementById("mezuak"+d).style.display="none";$.ajax({url:c,dataType:"html",success:function(g){$("#mezuak"+d).html("no data")}})}function clk(a,b){a.href=base_url+"backend/go.php?id="+b;return true}function idatzi_mezuguztia(a,b){$("#mezuak"+b).html(a)}function ProzesatuMezua(c,b,a){if(b.error||c!=b.id){idatzi_mezuguztia(".. error al actualizar los datos ..",a);alert("Error: "+b.error);return false}idatzi_mezuguztia(b.mezuberri,a);return false}function votar_comentario(b,f,e){var c=base_url+"backend/comentario_voto.php";var d="id="+f+"&user="+b+"&value="+e;var a="comment-"+f;c=c+"?"+d;$.getJSON(c,function(g){if(g.error){alert("Error: "+g.error);return false}else{$("#vc-"+f).html(g.votes+"");$("#vk-"+f).html(g.karma+"");if(g.image.length>0){$("#c-votes-"+f).html("<img style=\"background: url('/img/iconos/sprite.png') "+g.image+' no-repeat;" src="/img/estructura/pixel.gif" width="12" height="8"/>')}}})}function poll_comment_vote(b,f,e){var c=base_url+"backend/poll_comment_vote.php";var d="id="+f+"&user="+b+"&value="+e;var a="comment-"+f;c=c+"?"+d;$.getJSON(c,function(g){if(g.error){alert("Error: "+g.error);return false}else{$("#vc-"+f).html(g.votes+"");$("#vk-"+f).html(g.karma+"");if(g.image.length>0){$("#c-votes-"+f).html("<img style=\"background: url('/img/iconos/sprite.png') "+g.image+' no-repeat;" src="/img/estructura/pixel.gif" width="12" height="8"/>')}}})}function votar_corto(b,f,e){var c=base_url+"backend/corto_voto.php";var d="id="+f+"&user="+b+"&value="+e;var a="comment-"+f;c=c+"?"+d;$.getJSON(c,function(g){if(g.error){alert("Error: "+g.error);return false}else{$("#vc-"+f).html(g.votes+"");$("#vk-"+f).html(g.karma+"");if(g.image.length>0){$("#c-votes-"+f).html("<img style=\"background: url('/img/iconos/sprite.png') "+g.image+' no-repeat;" src="/img/estructura/pixel.gif" width="12" height="8"/>')}}})}function votar_notita(b,f,e){var c=base_url+"backend/notita_voto.php";var d="id="+f+"&user="+b+"&value="+e;var a="comment-"+f;c=c+"?"+d;$.getJSON(c,function(g){if(g.error){alert("Error: "+g.error);return false}else{$("#vc-"+f).html(g.votes+"");$("#vk-"+f).html(g.karma+"");if(g.image.length>0){$("#c-votes-"+f).html("<img style=\"background: url('/img/iconos/sprite.png') "+g.image+' no-repeat;" src="/img/estructura/pixel.gif" width="12" height="8"/>')}}})}function disable_vote_link(c,b,a){$("#a-va-"+c).html("<span>"+b+"</span>");$("#a-va-"+c).css("background",a)}function parseLinkAnswer(b,a){$("#problem-"+b).hide();if(a.error||b!=a.id){disable_vote_link(b,"vaya :-(","#adcee9");alert("Error: "+a.error);return false}votes=parseInt(a.votes)+parseInt(a.anonymous);if($("#a-votes-"+a.id).html()!=votes){$("#a-votes-"+a.id).hide();$("#a-votes-"+a.id).html(votes+"");$("#a-votes-"+a.id).fadeIn("slow")}$("#a-neg-"+a.id).html(a.negatives+"");$("#a-usu-"+a.id).html(a.votes+"");$("#a-ano-"+a.id).html(a.anonymous+"");$("#a-karma-"+a.id).html(a.karma+"");if(a.value>0){if(a.aleatorio_valor=="no"){disable_vote_link(a.id,"&#161;biibaaa!","#FFFFFF")}else{disable_vote_link(a.id,"valió "+a.aleatorio_valor,"#FFFFFF")}}else{if(a.value<0){disable_vote_link(a.id,":-(","#FFFFFF")}}return false}function parsealeatorioLinkAnswer(b,a){if(a.error||b!=a.id){disable_vote_link(b,"vaya :-(","#adcee9");alert("Error: "+a.error);return false}if(a.aleatorios_positivos==0){color="#aaa"}else{color=""}$("#a-ale_pos-"+a.id).html(a.aleatorios_positivos+"");document.getElementById("a-ale_pos-"+a.id).style.color=color;$("#a-ale_neg-"+a.id).html(a.aleatorios_negativos+"");if(a.aleatorios_negativos==0){color=""}else{color="red"}document.getElementById("a-ale_neg-"+a.id).style.color=color;return false}function securePasswordCheck(a){if(a.value.length>5&&a.value.match("^(?=.{6,})(?=(.*[a-z].*))(?=(.*[A-Z0-9].*)).*$","g")){if(a.value.match("^(?=.{8,})(?=(.*[a-z].*))(?=(.*[A-Z].*))(?=(.*[0-9].*)).*$","g")){a.className="verde"}else{a.className="amarillo"}}else{a.className="rojo"}return false}function checkEqualFields(b,a){if(b.value==a.value){b.className="verde"}else{b.className="rojo"}return false}function enablebutton(b,c,d){var a=d.value;if(c!=null){c.disabled=false}if(a.length>0){b.disabled=false}else{b.disabled=true}}function checkfield(b,c,d){var a=base_url+"backend/checkfield.php?type="+b+"&name="+encodeURIComponent(d.value);$.get(a,function(e){if(e=="OK"){$("#"+b+"checkitvalue").html('<br/><span style="color:black">"'+encodeURI(d.value)+'": '+e+"</span>");c.submit.disabled=""}else{$("#"+b+"checkitvalue").html('<br/><span style="color:red">"'+encodeURI(d.value)+'": '+e+"</span>");c.submit.disabled="disabled"}});return false}function check_checkfield(a,b){field=document.getElementById(a);if(field&&!field.checked){alert(b);return false}}function report_problem(e,a,f,d){if(e.ratings.value==0){return}if(!confirm("¿Estás seguro de querer votar '"+e.ratings.options[e.ratings.selectedIndex].text+"'?")){e.ratings.selectedIndex=0;return false}var c="id="+f+"&user="+a+"&md5="+d+"&value="+e.ratings.value;var b=base_url+"backend/negativo.php?"+c;$.getJSON(b,function(g){parseLinkAnswer(f,g)});return false}function obtener(b,d,a,e,f){var c=base_url+"backend/"+b+"?id="+f+"&p="+e+"&type="+d;$("#"+a).load(c)}function modal_from_ajax(a,b){if(typeof(b)=="undefined"){b="&nbsp"}$.modal('<div class="header" id="modalHeader" style="z-index: 10;display: block;" ><div id="modalTitle">'+b+'</div><a href="#" title="Cerrar" class="modalCloseX modalClose"><img src="/img/estructura/pixel.gif" width="16" height="16"/></a></div><div style="z-index: 10;display: block;" class="content" id="modalContent">Loading...</div>',{overlay:"50"});$.get(a,function(c){$("#modalContent").html(c)})}function textCounter(c,a,b){if(c.value.length>b){c.value=c.value.substring(0,b)}else{a.value=b-c.value.length}}function tooltip(){}tooltip.id="tooltip";tooltip.main=null;tooltip.offsetx=10;tooltip.offsety=10;tooltip.shoffsetx=8;tooltip.shoffsety=8;tooltip.x=0;tooltip.y=0;tooltip.tooltipShadow=null;tooltip.tooltipText=null;tooltip.title_saved="";tooltip.saveonmouseover=null;tooltip.timeout=null;tooltip.active=false;tooltip.cache=new JSOC();tooltip.ie=(document.all)?true:false;if(tooltip.ie){tooltip.ie5=(navigator.userAgent.indexOf("MSIE 5")>0)}else{tooltip.ie5=false}tooltip.dom2=((document.getElementById)&&!(tooltip.ie5))?true:false;tooltip.show=function(a,b){if(this.dom2==false){return false}if(this.tooltipShadow==null){this.tooltipShadow=document.createElement("div");this.tooltipShadow.setAttribute("id","tooltip-shadow");document.body.appendChild(tooltip.tooltipShadow);this.tooltipText=document.createElement("div");this.tooltipText.setAttribute("id","tooltip-text");document.body.appendChild(this.tooltipText)}this.saveonmouseover=document.onmousemove;document.onmousemove=this.mouseMove;this.mouseMove(a);this.setText(b);this.tooltipText.style.visibility="visible";this.tooltipShadow.style.visibility="visible";this.active=true;return false};tooltip.setText=function(a){tooltip.tooltipShadow.style.width=0+"px";tooltip.tooltipShadow.style.height=0+"px";this.tooltipText.innerHTML=a;setTimeout("tooltip.setShadow()",1);return false};tooltip.setShadow=function(){tooltip.tooltipShadow.style.width=tooltip.tooltipText.clientWidth+"px";tooltip.tooltipShadow.style.height=tooltip.tooltipText.clientHeight+"px"};tooltip.hide=function(a){if(this.dom2==false){return false}document.onmousemove=this.saveonmouseover;this.saveonmouseover=null;if(this.tooltipShadow!=null){this.tooltipText.style.visibility="hidden";this.tooltipShadow.style.visibility="hidden";this.tooltipText.innerHTML=""}this.active=false};tooltip.mouseMove=function(a){if(tooltip.ie){tooltip.x=event.clientX;tooltip.y=event.clientY}else{tooltip.x=a.pageX;tooltip.y=a.pageY}tooltip.moveTo(tooltip.x+tooltip.offsetx,tooltip.y+tooltip.offsety)};tooltip.moveTo=function(b,a){if(this.ie){b+=document.documentElement.scrollLeft;a+=document.documentElement.scrollTop}if(this.tooltipText.clientWidth>0&&document.documentElement.clientWidth>0&&b>document.documentElement.clientWidth*0.55){b=b-this.tooltipText.clientWidth-2*this.offsetx}this.tooltipText.style.left=b+"px";this.tooltipText.style.top=a+"px";xLS=b+this.shoffsetx;yLS=a+this.shoffsety;this.tooltipShadow.style.left=xLS+"px";this.tooltipShadow.style.top=yLS+"px"};tooltip.c_show=function(d,b,a,c){if(this.dom2==false){return false}if(a==0&&c>0){this.ajax_delayed(d,"get_link.php",c);return}if(b=="id"){this.ajax_delayed(d,"get_comment_tooltip.php",a+"&link="+c);return}else{if(b=="order"){this.ajax_delayed(d,"get_comment_tooltip.php",a+"&link="+c);return}else{text=a}}return this.show(d,text)};tooltip.poll_c_show=function(d,b,a,c){if(this.dom2==false){return false}if(a==0&&c>0){this.ajax_delayed(d,"get_encuesta.php",c);return}if(b=="id"){this.ajax_delayed(d,"get_opinion_tooltip.php",a+"&link="+c);return}else{if(b=="order"){this.ajax_delayed(d,"get_opinion_tooltip.php",a+"&link="+c);return}else{text=a}}return this.show(d,text)};tooltip.clear=function(a){if(this.timeout!=null){clearTimeout(this.timeout);this.timeout=null}this.hide(a)};tooltip.ajax_delayed=function(b,a,d,c){c=c||600000;if(this.active){return false}if((object=this.cache.get(a+d))!=undefined){tooltip.show(b,object[a+d])}else{this.show(b,"cargando...");this.timeout=setTimeout("tooltip.ajax_request('"+a+"', '"+d+"', "+c+")",100)}};tooltip.ajax_request=function(a,d,c){var b=base_url+"backend/"+a+"?id="+d;tooltip.timeout=null;$.ajax({url:b,dataType:"html",success:function(e){tooltip.cache.set(a+d,e,{ttl:c});tooltip.setText(e)}})};function applyTag(b,a){obj=document.getElementById(b);if(obj){wrapText(obj,a,a)}}function wrapText(d,a){if(typeof d.selectionStart=="number"){var e=d.selectionStart;var b=d.selectionEnd;if(e==b||b<e){return false}d.value=d.value.substring(0,e)+replaceText(d.value.substring(e,b),a)+d.value.substring(b,d.value.length)}else{if(document.selection){d.focus();var c=document.selection.createRange();if(c.parentElement()!=d){return false}if(c.text==""){return false}if(typeof c.text=="string"){document.selection.createRange().text=replaceText(c.text,a)}}else{d.value+=text}}}function replaceText(b,a){b=b.replace(/(^|\s)[\*_]([^\s]+)[\*_]/gm,"$1$2");b=b.replace(/([^\s]+)/gm,a+"$1"+a);return b}function reportAjaxStats(a){return;if(window.urchinTracker){urchinTracker(a+".ajax")}}function bindTogglePlusMinus(a,b,c){$(document).ready(function(){$("#"+b).bind("click",function(){if($("#"+a).attr("src")==plus){$("#"+a).attr("src",minus)}else{$("#"+a).attr("src",plus)}$("#"+c).slideToggle("fast");return false})})}function abrirEditar(g,f,j,i,h){get_ajax(g,f,j,i,h);document.getElementById("ajaxcontainer").style.height="auto";return}function get_ajax(b,d,a,e,f){var c=base_url+"ajax/"+b+"?id="+f+"&p="+e+"&type="+d;$("#"+a).load(c)}function comment_reply(c){ref="#"+c+" ";textarea=$("#comment");if(textarea.length==0){return}var b=new RegExp(ref);var a=textarea.val();if(a.match(b)){return}if(a.length>0&&a.charAt(a.length-1)!="\n"){a=a+"\n"}textarea.val(a+ref);textarea.get(0).focus()}function appySmiley(a){textarea=$("#comment");a=textarea.val()+" {"+a+"}";textarea.val(a);textarea.focus();textarea.select()}function cambiar_estado(b,a){if(a=="formulario"){document.getElementById("link").OnClick="";document.getElementById("link").innerHTML='<input size="70" type="text" autocomplete="off" name="new_estado" id="new_estado" value="El texto irá aquí" /><a onclick="javascript:cambiar_estado(0, \'guardar\')" title="guardar"><img class="icon tick img-flotante" src="/img/estructura/pixel.gif" alt="guardar" title="guardar">'}else{alert(document.getElementById("link").OnClick);document.getElementById("link").innerHTML="actualizado";document.getElementById("link").OnClick="javascript:cambiar_estado("+b+", 'formulario')";return false}};